title: "Insert document"
description: ""
routes: |
  "/test":
    version: 1
    methods:
      POST:
        public: true
        action: "${dir.src}/mongodb-insert.php"
connection: |
  Mongodb-Connection:
    class: Fusio\Adapter\Mongodb\Connection\MongoDB
    config:
      url: "mongodb://127.0.0.1"
      database: "app"
actionFile: "mongodb-insert.php"
action: |
  <?php
  /**
   * @var \Fusio\Engine\ConnectorInterface $connector
   * @var \Fusio\Engine\ContextInterface $context
   * @var \Fusio\Engine\RequestInterface $request
   * @var \Fusio\Engine\Response\FactoryInterface $response
   * @var \Fusio\Engine\ProcessorInterface $processor
   * @var \Psr\Log\LoggerInterface $logger
   * @var \Psr\SimpleCache\CacheInterface $cache
   */
  
  /** @var \MongoDB\Database $connection */
  $connection = $connector->getConnection('Mongodb-Connection');
  $collection = $connection->selectCollection('app_todo');
  
  $collection->insertOne($request->getBody());
  
  return $response->build(201, [], [
      'success' => true,
      'message' => 'Insert successful',
  ]);

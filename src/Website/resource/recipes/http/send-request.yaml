title: "Send request"
description: ""
routes: |
  "/test":
    version: 1
    methods:
      POST:
        public: true
        action: "${dir.src}/send-http.php"
connection: |
  Http-Connection:
    class: Fusio\Adapter\Http\Connection\Http
    config:
      url: "http://api.remote-service.com"
actionFile: "send-request.php"
action: |
  <?php
  /**
   * @var \Fusio\Engine\ConnectorInterface $connector
   * @var \Fusio\Engine\ContextInterface $context
   * @var \Fusio\Engine\RequestInterface $request
   * @var \Fusio\Engine\Response\FactoryInterface $response
   * @var \Fusio\Engine\ProcessorInterface $processor
   * @var \Psr\Log\LoggerInterface $logger
   * @var \Psr\SimpleCache\CacheInterface $cache
   */

  use PSX\Http\Exception as StatusCode;

  /** @var \GuzzleHttp\Client */
  $client = $connector->getConnection('Http-Connection');

  $resp = $client->request('GET', '/my/path/', [
    'headers' => [
      'Authorization' => 'Bearer [token]'
    ]
  ]);

  $data = json_decode((string) $resp->getBody());

  return $response->build(201, [], $data);
